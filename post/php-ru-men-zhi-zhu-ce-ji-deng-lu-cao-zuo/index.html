
<!DOCTYPE html>
<html>
  <head>
    
<meta charset="utf-8" >

<title>PHP入门之注册及登录操作 | 大青的Blog</title>
<meta name="description" content="emmmmmmm">

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.0/animate.min.css">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="shortcut icon" href="https://xhrr.github.io//favicon.ico?v=1586329974936">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://xhrr.github.io//styles/main.css">


  
    <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css" />
  

  


<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>



  </head>
  <body>
    <div id="app" class="main">
      <div class="site-header-container">
  <div class="site-header">
    <div class="left">
      <a href="https://xhrr.github.io/">
        <img class="avatar" src="https://xhrr.github.io//images/avatar.png?v=1586329974936" alt="" width="32px" height="32px">
      </a>
      <a href="https://xhrr.github.io/">
        <h1 class="site-title">大青的Blog</h1>
      </a>
    </div>
    <div class="right">
      <transition name="fade">
        <i class="icon" :class="{ 'icon-close-outline': menuVisible, 'icon-menu-outline': !menuVisible }" @click="menuVisible = !menuVisible"></i>
      </transition>
    </div>
  </div>
</div>

<transition name="fade">
  <div class="menu-container" style="display: none;" v-show="menuVisible">
    <div class="menu-list">
      
        
          <a href="/" class="menu purple-link">
            首页
          </a>
        
      
        
          <a href="/archives" class="menu purple-link">
            归档
          </a>
        
      
        
          <a href="/tags" class="menu purple-link">
            标签
          </a>
        
      
        
          <a href="/post/about" class="menu purple-link">
            关于
          </a>
        
      
    </div>
  </div>
</transition>


      <div class="content-container">
        <div class="post-detail">
          
            <div class="feature-container" style="background-image: url('https://xhrr.github.io//post-images/php-ru-men-zhi-zhu-ce-ji-deng-lu-cao-zuo.png')">
            </div>
          
          <h2 class="post-title">PHP入门之注册及登录操作</h2>
          <div class="post-info post-detail-info">
            <span><i class="icon-calendar-outline"></i> 2020-04-07</span>
            
              <span>
                <i class="icon-pricetags-outline"></i>
                
                  <a href="https://xhrr.github.io/tag/jishu/">
                    技术
                    
                  </a>
                
              </span>
            
          </div>
          <div class="post-content">
            <h2 id="一实现之后的成果">一，实现之后的成果</h2>
<figure data-type="image" tabindex="1"><img src="https://xhrr.github.io//post-images/1586250463866.png" alt="" loading="lazy"></figure>
<p>注册成功的界面</p>
<figure data-type="image" tabindex="2"><img src="https://xhrr.github.io//post-images/1586250467957.png" alt="" loading="lazy"></figure>
<p>以及注册后的自动跳转到登录成功界面</p>
<figure data-type="image" tabindex="3"><img src="https://xhrr.github.io//post-images/1586250471931.png" alt="" loading="lazy"></figure>
<h2 id="二准备工作">二，准备工作</h2>
<h4 id="1html界面">(1)HTML界面</h4>
<p>为了方便，仅贴出原版未用CSS美化后代码</p>
<pre><code class="language-php+HTML">注册界面：
&lt;html&gt;
	&lt;head&gt;
		&lt;meta charset=&quot;utf-8&quot;&gt;
		&lt;title&gt;简单的报名小操作&lt;/title&gt;
	&lt;/head&gt;
	&lt;body&gt;
		&lt;div style=&quot;margin-left: calc(40%); margin-top: calc(20%);&quot;&gt; 
		&lt;form action=&quot;./api/registApi.php&quot; method=&quot;post&quot;&gt;
			用户:&lt;input type=&quot;text&quot; name=&quot;username&quot;/&gt;&lt;br&gt;&lt;br&gt;
			密码:&lt;input type=&quot;text&quot; name=&quot;password&quot;/&gt;&lt;br&gt;&lt;br&gt;
			&lt;input type=&quot;submit&quot; value=&quot;提交&quot;/&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;
			&lt;input type=&quot;reset&quot; value=&quot;重置&quot; /&gt;
		&lt;/form&gt;
		&lt;a href=&quot;login.html&quot;&gt;注册完毕?登陆&lt;/a&gt;&amp;nbsp;&lt;a href=&quot;#&quot;&gt;忘记密码?找回&lt;/a&gt;
		&lt;/div&gt;
	&lt;/body&gt;
&lt;/html&gt;

</code></pre>
<pre><code class="language-html">登陆界面
&lt;html&gt;
   &lt;head&gt;
      &lt;meta charset=&quot;utf-8&quot;&gt;
      &lt;title&gt;网络部人员管理系统&lt;/title&gt;
   &lt;/head&gt;
   &lt;body&gt;
      &lt;div style=&quot;margin-left: calc(40%); margin-top: calc(20%);&quot;&gt; 
      &lt;form action=&quot;./api/registApi.php&quot; method=&quot;post&quot;&gt;
         用户:&lt;input type=&quot;text&quot; name=&quot;username&quot;/&gt;&lt;br&gt;&lt;br&gt;
         密码:&lt;input type=&quot;text&quot; name=&quot;password&quot; /&gt;&lt;br&gt;&lt;br&gt;
         &lt;input type=&quot;submit&quot; value=&quot;提交&quot;/&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;
         &lt;input type=&quot;reset&quot; value=&quot;重置&quot; /&gt;
      &lt;/form&gt;
      &lt;a href=&quot;register.html&quot;&gt;没有账号?注册&lt;/a&gt;&amp;nbsp;&lt;a href=&quot;#&quot;&gt;忘记密码?找回&lt;/a&gt;
      &lt;/div&gt;
   &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<h4 id="2数据库">(2)数据库</h4>
<p>建立如图的表和字段</p>
<figure data-type="image" tabindex="4"><img src="https://xhrr.github.io//post-images/1586251447930.png" alt="" loading="lazy"></figure>
<p>在PHP中写入如下代码，用以链接数据库</p>
<pre><code class="language-PHP">&lt;?php
//连接mysql数据库  $con钥匙 mysqli_connect( “服务器名”, “数据库用户名”, “连接的数据密码”);
	$con=mysqli_connect(&quot;localhost&quot;,&quot;root&quot;,&quot;root&quot;);
	
	//设置字符集
	header('Content-type:text/html;charset=utf-8');
	
	//选择数据库
	mysqli_query($con,&quot;use test&quot;); 
?&gt;
</code></pre>
<p>至此，准备工作完成。</p>
<h2 id="三实现方法">三，实现方法</h2>
<h4 id="1注册页面">（1）注册页面</h4>
<p>思路如下：</p>
<pre><code>//第一步，拿到字段 用户名 密码
//第二步，查询是否占用，是 提示被占用，否 继续
//第三步，继续，往数据库插入一条记录
//第四步，根据返回值判断是否操作成功，成功返回登录，否，提示后返回
</code></pre>
<pre><code>（1）第一步，拿到字段：用户名和密码,定义变量获取前端传回来的两个数据
$username = $_POST['username'];
$password = $_POST['password'];
</code></pre>
<pre><code>（2）第二部，查询是否占用，是 提示被占用，否 继续
$sql = &quot;select count(*) as total from wlb where username='$username' &quot;;
$res = mysqli_query($con,$sql);
$row = mysqli_fetch_array($res);
$count = $row['total'];
if($count&gt;0){
    	echo &quot;用户名被占用&quot;;
    	echo '&lt;a href=&quot;../register.html&quot;&gt;返回&lt;/a&gt;';
    }else{
    	echo &quot;用户名未被占用，请继续&quot;
    }
</code></pre>
<p>两个函数的作用及含义:</p>
<pre><code>1，mysqli_query()函数执行某个针对数据库的查询：
mysqli_query(connection,query,resultmode);
参数描述：
connection 必需。规定要使用的 MySQL 连接。
query 必需，规定查询字符串。
（这是一个存放mysql命令的字符串，命令内容要用该函数才可实现）
resultmode
可选。一个常量。可以是下列值中的任意一个：
MYSQLI_USE_RESULT（如果需要检索大量数据，请使用这个）
MYSQLI_STORE_RESULT（默认）

2，mysqli_fetch_array() 函数
从结果集中取得一行作为关联数组，或数字数组，或二者兼有。
mysqli_fetch_array(result,resulttype);
参数描述：
result 必需。规定由 mysqli_query()、mysqli_store_result() 或 mysqli_use_result() 返回的结果集标识符。
resulttype 可选。规定应该产生哪种类型的数组。可以是以下值中的一个：
MYSQLI_ASSOC
MYSQLI_NUM
MYSQLI_BOTH
</code></pre>
<pre><code>(3)第三步，继续，往数据库插入一条记录
    $sql = &quot;insert into wlb(password,username) values ('$password','$username')&quot;;
    $res = mysqli_query($con,$sql) ;

</code></pre>
<pre><code>(4)第四步，根据返回值判断是否操作成功，成功返回登录，否，提示后返回
 if($res&gt;0){
        echo &quot;注册成功&quot;;
    }else{
        echo &quot;注册失败&quot;;
    }
    最后，关闭数据库
     mysqli_close($con);
</code></pre>
<p>那么，通过以上的方法，即可获得简单的注册操作</p>
<p>整体代码结构如下：</p>
<pre><code>//includ的是链接数据库操作
&lt;?php
include_once (&quot;conn.php&quot;);
$username = $_POST['username'];
$password = $_POST['password'];
$sql = &quot;select count(*) as total from wlb where username='$username' &quot;;
$res = mysqli_query($con,$sql);
$row = mysqli_fetch_array($res);
$count = $row['total'];
if($count&gt;0){
    echo &quot;用户名被占用&quot;;
    echo '&lt;a href=&quot;../register.html&quot;&gt;返回&lt;/a&gt;  &lt;/br&gt;';
}else {
    $sql = &quot;insert into wlb(password,username) values ('$password','$username')&quot;;
    $res = mysqli_query($con,$sql) ;
    if($res&gt;0){
        echo &quot;注册成功&quot;;
    }else{
        echo &quot;注册失败&quot;;
    }
    mysqli_close($con);
}
?&gt;

</code></pre>
<h4 id="2-登陆页面">(2) 登陆页面</h4>
<p>思路如下：</p>
<pre><code>//第一步，拿到字段 用户名 密码
//第二步，查询是否存在，是 登录，否 不存在
//第三步，继续，查询密码是否正确，否则，密码错误
//第四步，成功后自动跳转到成功页面
</code></pre>
<pre><code>（1）同理注册的第一步
$username = $_POST['username'];
$password = $_POST['password'];
</code></pre>
<pre><code>（2）查询是否存在，是 登录，否 不存在
//通过查询密码来确定是否存在
$sql = &quot;select password as total from wlb where username='$username' &quot;;
$res = mysqli_query($con,$sql);
$row = mysqli_fetch_array($res);
$count = $row['total'];
if(!$row[0]){
echo &quot;用户名不存在&quot;;
}else{
echo &quot;用户名存在&quot;；
}
</code></pre>
<pre><code>（3）继续，查询密码是否正确，否则，密码错误
 if ($row[0] !=$_POST['password']){
    echo &quot;密码不正确&quot;;
}else{
    echo &quot;密码正确&quot;;
}
</code></pre>
<pre><code>第四步，成功后通过header()函数自动跳转到成功页面
 header(&quot;location:../success.html&quot;);
</code></pre>
<p>函数的作用：</p>
<pre><code>header() 函数向客户端发送原始的 HTTP 报头。
语法：header(string,replace,http_response_code)；
参数：
	string；必需。规定要发送的报头字符串。
	replace：可选。指示该报头是否替换之前的报头，或添加第二个报头。默认是 true（替换）。false（允许相同	  类型的多个报头）。
	http_response_code：可选。把 HTTP 响应代码强制为指定的值。（PHP 4 以及更高版本可用）
</code></pre>
<p>那么，通过以上的方法，即可获得简单的登录操作</p>
<p>整体代码结构如下：</p>
<pre><code>&lt;?php
include_once (&quot;conn.php&quot;);
$username = $_POST['username'];
$password = $_POST['password'];
$sql = &quot;select password as total from wlb where username='$username' &quot;;
$res = mysqli_query($con,$sql);
$row = mysqli_fetch_array($res);
$count = $row['total'];
if(!$row[0]){
echo &quot;用户名不存在&quot;;
}else if ($row[0] !=$_POST['password']){
    echo &quot;密码不正确&quot;;
}else{
    header(&quot;location:../success.html&quot;);
}
?&gt;
</code></pre>

          </div>
        </div>

        
          <div class="next-post">
            <a class="purple-link" href="https://xhrr.github.io/post/mysql-xue-xi-bi-ji/">
              <h3 class="post-title">
                下一篇：MySQL学习笔记（摘
              </h3>
            </a>
          </div>
          
      </div>

      
        
          <div id="gitalk-container"></div>
        

        
      

      <div class="site-footer">
  <div class="slogan">emmmmmmm</div>
  <div class="social-container">
    
      
    
      
    
      
    
      
    
      
    
  </div>
  Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> | <a class="rss" href="https://xhrr.github.io//atom.xml" target="_blank">RSS</a>
</div>


    </div>
    <script type="application/javascript">

hljs.initHighlightingOnLoad()

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>



  
    <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
    <script>

      var gitalk = new Gitalk({
        clientID: 'dab5b27aad29f8866577',
        clientSecret: '742b92f024e44585437e17d88b37f802a7e7d843',
        repo: 'xhrr.github.io',
        owner: 'xhrr',
        admin: ['xhrr'],
        id: (location.pathname).substring(0, 49),      // Ensure uniqueness and length less than 50
        distractionFreeMode: false  // Facebook-like distraction free mode
      })

      gitalk.render('gitalk-container')

    </script>
  

  




  </body>
</html>
